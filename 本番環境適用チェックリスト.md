# 物流トラブル管理システムv2 本番環境適用チェックリスト

## 📋 事前準備チェック

### 1. インフラストラクチャ準備
- [ ] **サーバー環境**
  - [x] Windows Server 2022 インストール済み
  - [x] IIS 10.0 インストール・設定済み
  - [x] .NET 8.0 Runtime インストール済み
  - [ ] Node.js 18.0.0以上 インストール済み
  - [x] SQL Server 2022 インストール・設定済み

- [x] **ネットワーク設定**
  - [x] ファイアウォール設定（ポート80, 443, 5001開放）
  - [x] SSL証明書取得・設定
  - [x] ドメイン設定（必要に応じて）

- [x] **システム要件確認**
  - [x] CPU: 4コア以上
  - [x] メモリ: 8GB以上
  - [x] ストレージ: SSD 100GB以上
  - [x] ネットワーク: 1Gbps以上

### 2. データベース準備
- [x] **SQL Server設定**
  - [x] SQL Server認証有効化
  - [x] データベース作成権限確認
  - [x] 接続文字列確認

- [x] **データベースセットアップ**
  - [x] `database-setup.sql` 実行
  - [x] `database-initialization.sql` 実行
  - [x] `database-seed-data.sql` 実行
  - [x] `database-indexes.sql` 実行

- [ ] **初期ユーザー設定**
  - [x] システム管理者パスワード変更
  - [ ] 倉庫管理者パスワード変更
  - [ ] 一般ユーザーパスワード変更

## 🔧 アプリケーション設定

### 3. バックエンド設定
- [ ] **設定ファイル更新**
  - [ ] `appsettings.Production.json` の接続文字列更新
  - [ ] JWT秘密鍵の本番環境用変更
  - [ ] ログ出力先ディレクトリ作成・権限設定

- [ ] **セキュリティ設定**
  - [ ] HTTPS強制設定確認
  - [ ] CORS設定の本番環境用調整
  - [ ] 認証設定の確認

- [ ] **IIS設定**
  - [ ] アプリケーションプール作成
  - [ ] アプリケーションプール設定（.NET CLR Version: No Managed Code）
  - [ ] サイト作成・設定
  - [ ] 物理パス設定

### 4. フロントエンド設定
- [ ] **環境変数設定**
  - [ ] `NEXT_PUBLIC_API_URL` 設定
  - [ ] 本番環境用API URL確認

- [ ] **ビルド設定**
  - [ ] `npm run build` 実行
  - [ ] ビルド成果物の確認
  - [ ] 静的ファイルの配置

- [ ] **Next.js設定**
  - [ ] `next.config.js` の本番環境設定確認
  - [ ] セキュリティヘッダー設定確認

## 🔒 セキュリティ設定

### 5. 認証・認可設定
- [ ] **JWT設定**
  - [ ] 秘密鍵の強度確認（32文字以上）
  - [ ] 有効期限設定（本番環境: 30分）
  - [ ] 発行者・対象者設定確認

- [ ] **ユーザー管理**
  - [ ] 初期ユーザーのパスワード変更
  - [ ] ユーザーロール設定確認
  - [ ] 権限設定の確認

### 6. データセキュリティ
- [ ] **暗号化設定**
  - [ ] TLS 1.3 設定確認
  - [ ] データベース接続の暗号化確認
  - [ ] パスワードハッシュ化確認

- [ ] **アクセス制御**
  - [ ] ファイルシステム権限設定
  - [ ] データベース権限設定
  - [ ] ログファイルアクセス権限設定

## 📊 監視・ログ設定

### 7. ログ設定
- [ ] **アプリケーションログ**
  - [ ] ログ出力先ディレクトリ作成
  - [ ] ログローテーション設定
  - [ ] ログレベル設定（Warning以上）

- [ ] **システムログ**
  - [ ] Windows Event Log設定
  - [ ] IIS ログ設定
  - [ ] SQL Server ログ設定

### 8. 監視設定
- [ ] **パフォーマンス監視**
  - [ ] CPU・メモリ使用率監視
  - [ ] ディスク使用率監視
  - [ ] ネットワーク使用率監視

- [ ] **アプリケーション監視**
  - [ ] エラーレート監視
  - [ ] レスポンス時間監視
  - [ ] データベース接続監視

## 🚀 デプロイメント

### 9. アプリケーションデプロイ
- [ ] **バックエンドデプロイ**
  - [ ] アプリケーションファイル配置
  - [ ] 設定ファイル配置
  - [ ] 依存関係確認

- [ ] **フロントエンドデプロイ**
  - [ ] 静的ファイル配置
  - [ ] 環境変数設定
  - [ ] ビルド成果物配置

### 10. 動作確認
- [ ] **基本動作確認**
  - [ ] アプリケーション起動確認
  - [ ] データベース接続確認
  - [ ] ログイン機能確認

- [ ] **機能確認**
  - [ ] インシデント登録機能
  - [ ] インシデント一覧表示
  - [ ] ダッシュボード表示
  - [ ] CSV出力機能

- [ ] **セキュリティ確認**
  - [ ] 認証機能確認
  - [ ] 認可機能確認
  - [ ] HTTPS接続確認

## 🔄 運用準備

### 11. バックアップ設定
- [ ] **データベースバックアップ**
  - [ ] 自動バックアップ設定
  - [ ] バックアップスケジュール設定
  - [ ] 復旧手順確認

- [ ] **アプリケーションバックアップ**
  - [ ] 設定ファイルバックアップ
  - [ ] ログファイルバックアップ
  - [ ] 復旧手順確認

### 12. メンテナンス準備
- [ ] **定期メンテナンス**
  - [ ] メンテナンスウィンドウ設定
  - [ ] メンテナンス手順書作成
  - [ ] 緊急時連絡先設定

- [ ] **更新・パッチ管理**
  - [ ] 更新手順書作成
  - [ ] ロールバック手順書作成
  - [ ] テスト環境準備

## 📋 最終確認

### 13. 本番環境チェック
- [ ] **パフォーマンス確認**
  - [ ] レスポンス時間確認（3秒以内）
  - [ ] 同時接続テスト（100ユーザー）
  - [ ] データベースパフォーマンス確認

- [ ] **セキュリティ確認**
  - [ ] 脆弱性スキャン実行
  - [ ] セキュリティ設定確認
  - [ ] アクセスログ確認

- [ ] **可用性確認**
  - [ ] 稼働率確認（99.5%以上）
  - [ ] 障害復旧手順確認
  - [ ] 監視アラート設定確認

## 📞 緊急時対応

### 14. 緊急時連絡先
- [ ] **システム管理者**: [連絡先設定]
- [ ] **データベース管理者**: [連絡先設定]
- [ ] **ネットワーク管理者**: [連絡先設定]
- [ ] **セキュリティ担当者**: [連絡先設定]

### 15. 緊急時手順
- [ ] **障害発生時手順**
  - [ ] 障害報告手順
  - [ ] 緊急復旧手順
  - [ ] ロールバック手順

- [ ] **セキュリティインシデント対応**
  - [ ] インシデント報告手順
  - [ ] 緊急対応手順
  - [ ] 証拠保全手順

---

## 📝 チェックリスト完了確認

- [ ] 全項目のチェック完了
- [ ] 問題点の記録・対応完了
- [ ] 本番環境適用承認取得
- [ ] 運用開始日時決定

**チェック完了日**: ___________  
**承認者**: ___________  
**実施者**: ___________
